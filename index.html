<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√≠a de Muertos - Geck Codex</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a0a2e 0%, #4a0e4e 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #0f0a1e;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(255, 107, 0, 0.3);
            border: 2px solid #ff6b00;
        }

        .header {
            background: linear-gradient(90deg, #ff6b00, #ff1493, #ffb700);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ff1493;
            animation: pulse 2s infinite;
        }

        .dot:nth-child(2) {
            background: #ffb700;
            animation-delay: 0.3s;
        }

        .dot:nth-child(3) {
            background: #00ffff;
            animation-delay: 0.6s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }

        .title {
            color: white;
            font-weight: bold;
            margin-left: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .editor {
            padding: 20px;
            min-height: 400px;
            background: #0f0a1e;
            color: #00ffff;
            font-size: 16px;
            line-height: 1.6;
        }

        .line {
            display: flex;
            margin-bottom: 5px;
            opacity: 0;
            animation: fadeIn 0.3s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .line-number {
            color: #666;
            min-width: 40px;
            text-align: right;
            padding-right: 15px;
            user-select: none;
        }

        .code-content {
            flex: 1;
        }

        .keyword {
            color: #ff1493;
            font-weight: bold;
        }

        .function {
            color: #ffb700;
        }

        .string {
            color: #ff6b00;
        }

        .comment {
            color: #7f8c8d;
            font-style: italic;
        }

        .variable {
            color: #00ffff;
        }

        .number {
            color: #9b59b6;
        }

        .operator {
            color: #e74c3c;
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 18px;
            background: #ff6b00;
            animation: blink 1s infinite;
            margin-left: 2px;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .skull {
            position: fixed;
            font-size: 30px;
            animation: float 3s ease-in-out infinite;
            opacity: 0.3;
            pointer-events: none;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .footer {
            background: #1a0a2e;
            padding: 10px 20px;
            color: #7f8c8d;
            font-size: 12px;
            border-top: 1px solid #ff6b00;
        }

        .status {
            display: inline-block;
            margin-right: 20px;
        }

        .status-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff00;
            margin-right: 5px;
            animation: pulse 2s infinite;
        }

        /* Overlay de transici√≥n */
        .transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, #ff6b00, #1a0a2e);
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            transition: opacity 1s ease-in-out;
        }

        .transition-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loading-text {
            text-align: center;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px #ff6b00; }
            50% { text-shadow: 0 0 40px #ff6b00, 0 0 60px #ff1493; }
        }
    </style>
</head>
<body>
    <div class="skull" style="top: 10%; left: 5%;">üíÄ</div>
    <div class="skull" style="top: 20%; right: 8%; animation-delay: 1s;">üå∫</div>
    <div class="skull" style="bottom: 15%; left: 10%; animation-delay: 2s;">üïØÔ∏è</div>
    <div class="skull" style="bottom: 25%; right: 5%; animation-delay: 1.5s;">üíÄ</div>

    <div class="container">
        <div class="header">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <span class="title">üíÄ CalaveraCoder.js - D√≠a de Muertos Edition üå∫</span>
        </div>

        <div class="editor" id="editor"></div>

        <div class="footer">
            <span class="status">
                <span class="status-dot"></span>
                <span id="statusText">Escribiendo c√≥digo...</span>
            </span>
            <span class="status" id="lineCount">L√≠neas: 0</span>
            <span class="status">Tema: D√≠a de Muertos üå∫</span>
        </div>
    </div>

    <!-- Overlay de transici√≥n -->
    <div class="transition-overlay" id="transitionOverlay">
        <div class="loading-text">
            <div>üíÄ Preparando la Ofrenda üå∫</div>
            <div style="font-size: 16px; margin-top: 20px;">Entrando al mundo del D√≠a de Muertos...</div>
        </div>
    </div>

    <script>
        const codeLines = [
            { num: 1, content: '<span class="comment">// üíÄ Celebrando el D√≠a de Muertos con c√≥digo üå∫</span>' },
            { num: 2, content: '' },
            { num: 3, content: '<span class="keyword">const</span> <span class="variable">ofrenda</span> <span class="operator">=</span> {' },
            { num: 4, content: '&nbsp;&nbsp;<span class="variable">flores</span>: <span class="string">"cempas√∫chil"</span>,' },
            { num: 5, content: '&nbsp;&nbsp;<span class="variable">velas</span>: <span class="number">12</span>,' },
            { num: 6, content: '&nbsp;&nbsp;<span class="variable">comida</span>: [<span class="string">"pan de muerto"</span>, <span class="string">"mole"</span>, <span class="string">"tamales"</span>],' },
            { num: 7, content: '&nbsp;&nbsp;<span class="variable">bebidas</span>: [<span class="string">"agua"</span>, <span class="string">"tequila"</span>, <span class="string">"atole"</span>],' },
            { num: 8, content: '&nbsp;&nbsp;<span class="variable">fotografias</span>: <span class="keyword">true</span>' },
            { num: 9, content: '};' },
            { num: 10, content: '' },
            { num: 11, content: '<span class="keyword">function</span> <span class="function">recordarALosQueSeHanIdo</span>(<span class="variable">nombre</span>) {' },
            { num: 12, content: '&nbsp;&nbsp;<span class="keyword">const</span> <span class="variable">mensaje</span> <span class="operator">=</span> <span class="string">`üíÄ ${nombre}, siempre en nuestros corazones üå∫`</span>;' },
            { num: 13, content: '&nbsp;&nbsp;<span class="keyword">return</span> <span class="variable">mensaje</span>;' },
            { num: 14, content: '}' },
            { num: 15, content: '' },
            { num: 16, content: '<span class="keyword">class</span> <span class="function">Calacas</span> {' },
            { num: 17, content: '&nbsp;&nbsp;<span class="function">constructor</span>(<span class="variable">nombre</span>) {' },
            { num: 18, content: '&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.<span class="variable">nombre</span> <span class="operator">=</span> <span class="variable">nombre</span>;' },
            { num: 19, content: '&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.<span class="variable">bailando</span> <span class="operator">=</span> <span class="keyword">true</span>;' },
            { num: 20, content: '&nbsp;&nbsp;}' },
            { num: 21, content: '' },
            { num: 22, content: '&nbsp;&nbsp;<span class="function">celebrar</span>() {' },
            { num: 23, content: '&nbsp;&nbsp;&nbsp;&nbsp;<span class="variable">console</span>.<span class="function">log</span>(<span class="string">`üéâ ${this.nombre} est√° celebrando! üíÉ`</span>);' },
            { num: 24, content: '&nbsp;&nbsp;}' },
            { num: 25, content: '}' },
            { num: 26, content: '' },
            { num: 27, content: '<span class="comment">// üïØÔ∏è La muerte no es el final, es el comienzo de un viaje...</span>' },
            { num: 28, content: '<span class="keyword">const</span> <span class="variable">catrina</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Calacas</span>(<span class="string">"La Catrina"</span>);' },
            { num: 29, content: '<span class="variable">catrina</span>.<span class="function">celebrar</span>();' },
            { num: 30, content: '' },
            { num: 31, content: '<span class="variable">console</span>.<span class="function">log</span>(<span class="function">recordarALosQueSeHanIdo</span>(<span class="string">"Abuelita"</span>));' },
            { num: 32, content: '<span class="variable">console</span>.<span class="function">log</span>(<span class="string">"üå∫ Vivan los que ya no est√°n üíÄ"</span>);' },
            { num: 33, content: '' },
            { num: 34, content: '<span class="comment">// üéØ Redirigiendo a la ofrenda principal...</span>' },
            { num: 35, content: '<span class="function">window</span>.<span class="function">location</span>.<span class="variable">href</span> <span class="operator">=</span> <span class="string">"tumba.html"</span>;' }
        ];

        const editor = document.getElementById('editor');
        const lineCount = document.getElementById('lineCount');
        const statusText = document.getElementById('statusText');
        const transitionOverlay = document.getElementById('transitionOverlay');
        let currentLine = 0;
        let currentChar = 0;
        let typingSpeed = 10; // Velocidad de escritura en ms

        function createLine(lineNum, content) {
            const line = document.createElement('div');
            line.className = 'line';
            line.innerHTML = `
                <span class="line-number">${lineNum}</span>
                <span class="code-content" id="line-${lineNum}"></span>
            `;
            editor.appendChild(line);
            return document.getElementById(`line-${lineNum}`);
        }

        function typeCharacter() {
            if (currentLine >= codeLines.length) {
                // C√≥digo completado - iniciar transici√≥n
                const lastLine = editor.querySelector('.line:last-child .code-content');
                if (lastLine) {
                    const cursor = lastLine.querySelector('.cursor');
                    if (cursor) cursor.remove();
                }
                
                statusText.textContent = "C√≥digo completado. Iniciando ofrenda...";
                
                // Mostrar overlay de transici√≥n despu√©s de 2 segundos
                setTimeout(() => {
                    transitionOverlay.classList.add('active');
                    
                    // Redirigir despu√©s de 3 segundos m√°s
                    setTimeout(() => {
                        window.location.href = "tumba.html";
                    }, 3000);
                }, 2000);
                
                return;
            }

            const line = codeLines[currentLine];
            let lineElement = document.getElementById(`line-${line.num}`);
            
            if (!lineElement) {
                lineElement = createLine(line.num, line.content);
                currentChar = 0;
            }

            if (currentChar === 0) {
                lineCount.textContent = `L√≠neas: ${line.num}`;
            }

            // Contenido sin etiquetas HTML para contar caracteres
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = line.content;
            const plainText = tempDiv.textContent || tempDiv.innerText || '';

            if (currentChar < plainText.length) {
                // Escribir car√°cter por car√°cter
                const htmlContent = line.content;
                let charCount = 0;
                let htmlIndex = 0;
                let result = '';
                let inTag = false;

                while (htmlIndex < htmlContent.length && charCount <= currentChar) {
                    const char = htmlContent[htmlIndex];
                    
                    if (char === '<') inTag = true;
                    if (char === '>') {
                        inTag = false;
                        result += char;
                        htmlIndex++;
                        continue;
                    }
                    
                    result += char;
                    
                    if (!inTag && char !== '>') {
                        if (htmlContent.substr(htmlIndex, 6) === '&nbsp;') {
                            result += 'nbsp;';
                            htmlIndex += 5;
                            charCount++;
                        } else {
                            charCount++;
                        }
                    }
                    
                    htmlIndex++;
                }

                lineElement.innerHTML = result + '<span class="cursor"></span>';
                currentChar++;
                setTimeout(typeCharacter, typingSpeed);
            } else {
                // L√≠nea completada, pasar a la siguiente
                lineElement.innerHTML = line.content;
                currentLine++;
                currentChar = 0;
                setTimeout(typeCharacter, 200);
            }
        }

        // Iniciar la escritura autom√°tica
        setTimeout(typeCharacter, 500);

        // Generar calaveras flotantes aleatorias
        setInterval(() => {
            const skulls = ['üíÄ', 'üå∫', 'üïØÔ∏è', 'ü¶¥'];
            const skull = document.createElement('div');
            skull.className = 'skull';
            skull.textContent = skulls[Math.floor(Math.random() * skulls.length)];
            skull.style.left = Math.random() * 100 + '%';
            skull.style.top = Math.random() * 100 + '%';
            skull.style.animationDelay = Math.random() * 2 + 's';
            document.body.appendChild(skull);
            
            setTimeout(() => skull.remove(), 5000);
        }, 3000);
    </script>
</body>
</html>